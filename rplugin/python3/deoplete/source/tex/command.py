from .base import Base


class Source(Base):
    def __init__(self, vim):
        super().__init__(vim)
        self.name = "LaTeX cmd"
        self.mark = "[LaTeX]"
        self.filetypes = ["tex"]
        self.input_pattern = r"\\[a-zA-Z]*"
        self.rank = 1000
        pkgcmds = {
            "": [
                "AtBeginDocument",
                "AtEndDocument",
                "AtEndOfClass",
                "AtEndOfPackage",
                "CurrentOption",
                "DeclareOption",
                "DeclareRobustCommand",
                "Downarrow",
                "ExecuteOptions",
                "IfFileExists",
                "Leftarrow",
                "Leftrightarrow",
                "LoadClass",
                "LoadClassWithOptions",
                "Longleftarrow",
                "Longleftrightarrow",
                "Longrightarrow",
                "NeedsTeXFormat",
                "PassOptionsToClass",
                "PassOptionsToPackage",
                "ProcessOptions",
                "ProvidesClass",
                "ProvidesPackage",
                "RequirePackage",
                "RequirePackageWithOptions",
                "Rightarrow",
                "Uparrow",
                "Updownarrow",
                "Vert",
                "abovedisplayshortskip",
                "abovedisplayskip",
                "addtocounter",
                "addtolength",
                "aftergroup",
                "approx",
                "author",
                "baselineskip",
                "baselinestretch",
                "belowdisplayshortskip",
                "belowdisplayskip",
                "bfseries",
                "bigcap",
                "bigcup",
                "bigodot",
                "bigoplus",
                "bigotimes",
                "bigskip",
                "bigsqcup",
                "bigtriangledown",
                "bigtriangleup",
                "biguplus",
                "bigvee",
                "bigwedge",
                "bmod",
                "bot",
                "bowtie",
                "breve",
                "bullet",
                "cap",
                "cdot",
                "cdotp",
                "cdots",
                "centering",
                "clearpage",
                "csname",
                "displaymath",
                "displaystyle",
                "documentclass",
                "else",
                "endcsname",
                "endinput",
                "enskip",
                "enspace",
                "ensuremath",
                "everymath",
                "fbox",
                "fboxrule",
                "fboxsep",
                "fi",
                "fill",
                "footnotesize",
                "framebox",
                "hbox",
                "hfill",
                "hline",
                "hphantom",
                "hrule",
                "hrulefill",
                "hspace",
                "if",
                "iffalse",
                "ifhmode",
                "input",
                "itemindent",
                "itemsep",
                "itshape",
                "jobname",
                "label",
                "leavevmode",
                "let",
                "lineskip",
                "makeatletter",
                "makeatother",
                "makebox",
                "mathbb",
                "mathbin",
                "mathclose",
                "mathopen",
                "mathord",
                "mathrel",
                "mathstrut",
                "mathsurround",
                "mbox",
                "mdseries",
                "medbreak",
                "medmuskip",
                "medskip",
                "muskip",
                "newcommand",
                "newenvironment",
                "newlength",
                "newline",
                "newpage",
                "nobreak",
                "nobreakdashes",
                "nobreakspace",
                "noindent",
                "nopagebreak",
                "normalbaselines",
                "normalbaselineskip",
                "normalfont",
                "normallineskip",
                "normalsize",
                "oldstylenums",
                "onecolumn",
                "overfullrule",
                "pagebreak",
                "pagenumbering",
                "pageref",
                "paperheight",
                "paperwidth",
                "par",
                "parbox",
                "parfillskip",
                "parindent",
                "parskip",
                "phantom",
                "pmod",
                "providecommand",
                "qquad",
                "quad",
                "raisebox",
                "ref",
                "relax",
                "renewcommand",
                "renewenvironment",
                "right",
                "rmfamily",
                "savebox",
                "scriptsize",
                "scshape",
                "setcounter",
                "setlength",
                "sffamily",
                "slshape",
                "smallskip",
                "smash",
                "stackrel",
                "stepcounter",
                "suppressfloats",
                "texorpdfstring",
                "textasciicircum",
                "textasciitilde",
                "textasteriskcentered",
                "textbackslash",
                "textbf",
                "textbigcircle",
                "textbullet",
                "textcircled",
                "textdagger",
                "textheight",
                "textit",
                "textmd",
                "textnormal",
                "textperiodcentered",
                "textrm",
                "textsc",
                "textsf",
                "textsl",
                "textsubscript",
                "textsuperscript",
                "texttt",
                "textup",
                "textvisiblespace",
                "textwidth",
                "the",
                "theequation",
                "thefootnote",
                "thepage",
                "thicklines",
                "thickmuskip",
                "thinlines",
                "thinmuskip",
                "thinspace",
                "title",
                "ttfamily",
                "twocolumn",
                "upshape",
                "usepackage",
                "vbox",
                "vphantom",
                "vrule",
                "vspace",
            ],
            "amsmath": [
                "DeclareMathOperator",
                "Longleftarrow",
                "Longleftrightarrow",
                "Longrightarrow",
                "boldsymbol",
                "intertext",
                "longleftarrow",
                "longleftrightarrow",
                "longmapsto",
                "longrightarrow",
                "mapsto",
                "operatorname",
            ],
            "article": [
                "abovecaptionskip",
                "appendixname",
                "belowcaptionskip",
                "figurename",
                "maketitle",
                "tablename",
                "tableofcontents",
                "thefigure",
                "thepart",
                "thesection",
                "thesubsection",
                "thesubsubsection",
                "thetable",
            ],
            "beamer": [
                "addtobeamertemplate",
                "defbeamertemplate",
                "insertsection",
                "insertsubsection",
                "insertsubsubsection",
                "setbeamercolor",
                "setbeamerfont",
                "setbeamersize",
                "setbeamertemplate",
                "usebackgroundtemplate",
                "usebeamercolor",
                "usebeamerfont",
                "usebeamertemplate",
                "usecolortheme",
                "usefonttheme",
                "useinnertheme",
                "useoutertheme",
            ],
            "BibLaTeX": [
                "Parencite",
                "addbibresource",
                "autocite",
                "citeauthor",
                "citetitle",
                "footfullcite",
                "fullcite",
                "parencite",
                "printbibliography",
                "supercite",
            ],
            "fontspec": [
                "fontspec",
                "newfontfamily",
                "setmainfont",
                "setmonofont",
                "setsansfont",
            ],
            "graphicx": [
                "includegraphics",
                "resizebox",
                "scalebox",
            ],
            "KOMA-Script": [
                "RedeclareSectionCommand",
                "setcapindent",
                "setkomafont",
            ],
            "tikz": [
                "tikz",
                "tikzset",
                "usetikzlibrary",
            ],
            "xcolor": [
                "color",
                "textcolor",
            ],
        }
        self._candidates = []
        for pkg, cmds in pkgcmds.items():
            for cmd in cmds:
                self._candidates += [{
                    "word": cmd,
                    "kind": pkg,
                    "abbr": "\\" + cmd,
                }]

    def gather_candidates(self, context):
        return self._candidates
